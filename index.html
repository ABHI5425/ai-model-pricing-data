<!DOCTYPE html>
<html lang="en">
<head>
  <meta charset="UTF-8">
  <title>Word Count + AI API Cost Estimator</title>
  <style>
    body {
      font-family: Arial, sans-serif;
      margin: 0;
      padding: 0;
      display: flex;
      height: 100vh;
    }

    .sidebar {
      width: 25%;
      background-color: #f0f0f0;
      padding: 20px;
      overflow-y: auto;
      border-right: 1px solid #ccc;
    }

    .main-content {
      width: 75%;
      padding: 20px;
      overflow-y: auto;
    }

    h2 {
      text-align: center;
    }

    textarea {
      width: 100%;
      height: 150px;
      font-size: 16px;
      padding: 12px;
      border-radius: 8px;
      border: 1px solid #ccc;
      resize: vertical;
    }

    .info {
      margin-top: 15px;
      font-size: 16px;
      line-height: 1.5;
      color: #333;
    }

    table {
      width: 100%;
      border-collapse: collapse;
      margin-top: 20px;
    }

    th, td {
      padding: 8px 12px;
      border-bottom: 1px solid #ddd;
      text-align: left;
    }

    th {
      background-color: #eee;
    }
  </style>
</head>
<body>

  <div class="sidebar">
    <h3>AI Model Pricing</h3>
    <table>
      <thead>
        <tr>
          <th>Provider</th>
          <th>Model</th>
          <th>Input ($/1K)</th>
          <th>Output ($/1K)</th>
        </tr>
      </thead>
      <tbody id="pricingTableBody">
        <!-- Pricing data will be populated here -->
      </tbody>
    </table>
  </div>

  <div class="main-content">
    <h2>Word Count + AI API Cost Estimator</h2>
    <textarea id="textInput" placeholder="Start typing..."></textarea>

    <div class="info">
      <p><strong>Word Count:</strong> <span id="wordCount">0</span></p>
      <p><strong>Character Count:</strong> <span id="charCount">0</span></p>
      <p><strong>Estimated Tokens:</strong> <span id="tokenCount">0</span></p>
    </div>

    <table>
      <thead>
        <tr>
          <th>Provider</th>
          <th>Model</th>
          <th>Cost (USD)</th>
          <th>Cost (INR)</th>
        </tr>
      </thead>
      <tbody id="costTableBody">
        <!-- Cost estimates will be populated here -->
      </tbody>
    </table>
  </div>

  <script>
    const textInput = document.getElementById('textInput');
    const wordCountDisplay = document.getElementById('wordCount');
    const charCountDisplay = document.getElementById('charCount');
    const tokenCountDisplay = document.getElementById('tokenCount');
    const costTableBody = document.getElementById('costTableBody');
    const pricingTableBody = document.getElementById('pricingTableBody');

    const usdToInr = 83;
    let pricingData = [];

    // Fetch pricing data from external JSON file
    fetch(https://abhi5425.github.io/ai-model-pricing-data/)
      .then(response => response.json())
      .then(data => {
        pricingData = data;
        populatePricingTable();
      })
      .catch(error => {
        console.error('Error fetching pricing data:', error);
      });

    function populatePricingTable() {
      pricingTableBody.innerHTML = '';
      pricingData.forEach(({ provider, model, inputPricePer1K, outputPricePer1K }) => {
        pricingTableBody.innerHTML += `
          <tr>
            <td>${provider}</td>
            <td>${model}</td>
            <td>$${inputPricePer1K.toFixed(4)}</td>
            <td>$${outputPrice::contentReference[oaicite:0]{index=0}</td>
            <td>$${outputPricePer1K.toFixed(4)}</td>
          </tr>
        `;
      });
    }

    function estimateTokens(text) {
      const charCount = text.length;
      const wordCount = text.trim().split(/\s+/).filter(Boolean).length;
      // General approximation: 1 token = ~4 characters (varies slightly across models)
      const tokenCount = Math.ceil(charCount / 4);
      return { wordCount, charCount, tokenCount };
    }

    function updateCountsAndCosts() {
      const text = textInput.value;
      const { wordCount, charCount, tokenCount } = estimateTokens(text);

      wordCountDisplay.textContent = wordCount;
      charCountDisplay.textContent = charCount;
      tokenCountDisplay.textContent = tokenCount;

      costTableBody.innerHTML = '';
      pricingData.forEach(({ provider, model, inputPricePer1K, outputPricePer1K }) => {
        const totalUSD = (inputPricePer1K + outputPricePer1K) * (tokenCount / 1000);
        const totalINR = totalUSD * usdToInr;
        costTableBody.innerHTML += `
          <tr>
            <td>${provider}</td>
            <td>${model}</td>
            <td>$${totalUSD.toFixed(5)}</td>
            <td>â‚¹${totalINR.toFixed(2)}</td>
          </tr>
        `;
      });
    }

    // Hook input change
    textInput.addEventListener('input', updateCountsAndCosts);
  </script>
</body>
</html>
